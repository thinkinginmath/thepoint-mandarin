<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Share YouTube Videos</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" 
  integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" 
  crossorigin="anonymous">
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" 
  integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" 
  crossorigin="anonymous"></script>


 </head>
 <body>
   <div class="container">
<h2>Share youtube videos instantly</h2>
      <form id="target" method="POST">
          <div class="form-group">
            <label for="exampleInputEmail1">
       Enter YouTube video links or IDs one in a line   </li>
            </ol></label>
            <textarea rows="8" name="book" class="form-control" id="book" aria-describedby="emailHelp" placeholder="è¯— 95:1-3"></textarea>
          </div>
          <button type="submit" class="btn btn-primary">Submit</button>
        </form>
        <div id="qrimg"></div>
      
<div id="player"></div>

</div>

   <script>
   document.addEventListener("message", function(event) {
    console.log("Received post message", event);

    logMessage(event.data);
}, false);

function logMessage(message) {
    log.append((new Date()) + " " + message + "\n");
}
var player;
function onYouTubeIframeAPIReady() {

    const urlParams = new URLSearchParams(window.location.search);
const myParam = urlParams.get('vid');
if (myParam) {
        player = new YT.Player('player', {
          height: '390',
          width: '640',
          videoId: myParam,
          enablejsapi: 1, 
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
    } else {

    }
}
var tag = document.createElement('script');

tag.src = "https://www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

function onPlayerReady(event) {
        event.target.playVideo();
}
function onPlayerStateChange(event) {
  console.log(event.data);
  if (event.data == YT.PlayerState.PLAYING) {
     window.postMessage("play", "*");
  } else {
    window.postMessage("play", "*");
    window.ReactNativeWebView.postMessage(event.data);
  }
}

function stopVideo() {
     player.stopVideo();
  }

 </script>

<script type="text/javascript"
        src="dist/yt.bundle.js"></script>

        <script>
        $("#target").submit(function( event ) {
      event.preventDefault();
      var book = $("textarea[name=book]").val();
      var t = getQRForVideos(book.split('\n'));
      var img = new Image()
img.src = t
$('#qrimg').appendChild(img);
      
});
        </script>
   </body>
     </html>